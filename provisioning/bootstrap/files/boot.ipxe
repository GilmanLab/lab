#!ipxe

# Bootstrap Talos netboot for a single mini-PC.
#
# Variables substituted at image build time:
# - __BOOTSTRAP_HTTP__
# - __TALOS_VERSION__

set base __BOOTSTRAP_HTTP__
set talos ${base}/talos/__TALOS_VERSION__

echo Bootstrapping Talos from: ${talos}
echo Machineconfig: ${base}/configs/minipc.yaml

kernel ${talos}/vmlinuz initrd=initramfs.xz talos.platform=metal talos.config=${base}/configs/minipc.yaml slab_nomerge pti=on
initrd ${talos}/initramfs.xz
boot


